# CSV Data Explorer â€” TypeScript + PapaParse

[![TypeScript](https://img.shields.io/badge/TypeScript-5.6-blue?logo=typescript)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-6.0-646CFF?logo=vite)](https://vitejs.dev/)
[![Papa Parse](https://img.shields.io/badge/Papa%20Parse-5.4-green)](https://www.papaparse.com/)


Un visor interactivo de archivos CSV desarrollado con **TypeScript**, **Vite**, **Papa Parse** y arquitectura modular basada en separaciÃ³n estricta de responsabilidades.

Esta aplicaciÃ³n permite cargar un archivo CSV, parsearlo de forma tipada, visualizarlo en una tabla dinÃ¡mica y ordenarlo por columnas mediante un sistema de ordenamiento estable y type-safe.

---

## ðŸš€ CaracterÃ­sticas Principales

### âœ… 1. File Handling & Typed Parsing

- âœ” Carga de archivos mediante `<input type="file">`
- âœ” ValidaciÃ³n estricta del archivo (`.csv` + tamaÃ±o seguro)
- âœ” Parseo asincrÃ³nico usando **Papa Parse**
- âœ” ConversiÃ³n a objetos fuertemente tipados (`CSVRow`)
- âœ” Manejo robusto de errores

### âœ… 2. Dynamic Table Rendering

- âœ” ConstrucciÃ³n dinÃ¡mica del `<table>` segÃºn los headers detectados
- âœ” Render de todas las filas tipadas
- âœ” Uso de fragments para render eficiente
- âœ” ActualizaciÃ³n del DOM sin recargar la pÃ¡gina

### âœ… 3. Type-Safe Column Sorting

- âœ” Ordenamiento estable (ascendente/descendente/none)
- âœ” Funciona con strings, nÃºmeros y valores nulos
- âœ” Indicadores visuales `â†‘` `â†“` en los encabezados
- âœ” Manejado por la clase `SortManager`
- âœ” ComparaciÃ³n locale-aware para strings

### âœ… 4. Row Selection

- âœ” Checkbox in each row for individual selection
- âœ” Visual feedback with `selected` class applied to row and cells
- âœ” Real-time display of selected rows in a paragraph below the table
- âœ” Console logging of selected row data for debugging

### âœ… 5. Arquitectura Limpia y Escalable

El proyecto sigue una separaciÃ³n modular clara:

```
src/
 â”œâ”€â”€ domain/        # LÃ³gica de negocio pura (SortManager)
 â”œâ”€â”€ services/      # Procesamiento CSV y manejo de archivos
 â”œâ”€â”€ ui/            # Render de interfaz y DOM
 â”œâ”€â”€ types/         # Tipos TypeScript compartidos
 â”œâ”€â”€ utils/         # Helpers (extensible)
 â”œâ”€â”€ main.ts        # Entry point
 â””â”€â”€ style.css      # Estilos generales
```

---

## ðŸ“‹ Requerimientos del Proyecto

Este repositorio cumple con todos los requisitos solicitados:

| Requisito                        | Estado |
| -------------------------------- | ------ |
| Git repository                   | âœ…      |
| README profesional               | âœ…      |
| Uso de Papa Parse con File API   | âœ…      |
| Tipado estricto con interfaces   | âœ…      |
| Render de tabla dinÃ¡mica         | âœ…      |
| Ordenamiento asc/desc/none       | âœ…      |
| Type guards y estabilidad        | âœ…      |
| SeparaciÃ³n en clases             | âœ…      |
| Manejo de errores (file + parse) | âœ…      |
| Loading state                    | âœ…      |
| Indicador visual de ordenamiento | âœ…      |
| tsconfig moderno                 | âœ…      |
| Prettier configurado             | âœ…      |

---

## ðŸ§± Arquitectura del Proyecto

### ðŸ“‚ Capa Services

#### ðŸ“„ `FileHandler`

- Valida archivos (tipo, tamaÃ±o, contenido)
- Protege contra errores de I/O
- Proporciona feedback claro al usuario

#### ðŸ“„ `ParserService`

- Maneja **Papa Parse** con configuraciÃ³n robusta
- Extrae headers automÃ¡ticamente
- Transforma filas a tipos correctos (`number`, `string`, `null`)
- Ignora errores no crÃ­ticos como `FieldMismatch`
- Detecta delimitadores automÃ¡ticamente

### ðŸ“‚ Capa Domain

#### ðŸ“„ `SortManager`

Se encarga del ordenamiento estable:

- Cicla estados: `none` â†’ `asc` â†’ `desc` â†’ `none`
- ComparaciÃ³n numÃ©rica inteligente
- ComparaciÃ³n de strings locale-aware
- Soporte para valores nulos (se ordenan al final)
- Mantiene orden original en valores iguales (stable sort)

### ðŸ“‚ Capa UI

#### ðŸ“„ `TableRenderer`

- Render dinÃ¡mico del `<table>` con headers y filas
- Headers clickeables para ordenamiento
- Indicadores visuales de estado de ordenamiento (`â†‘` `â†“`)
- Limpieza del DOM antes de re-render
- Inferencia automÃ¡tica de headers si no se proveen
- Checkbox column for row selection
- Visual selection state management
- Display selected rows below the table

---

## ðŸ”„ Recent Changes

### Row Selection Feature

**What was added:**
- Checkbox column as the first column in each table row
- Visual selection state with `selected` CSS class
- Paragraph element below table showing selected rows
- Console logging of selected row data

**How it works:**
1. Each row contains a checkbox in the first cell
2. Clicking the checkbox toggles the `selected` class on the row and all its cells
3. `updateSelectedRowsDisplay()` method collects all selected rows and:
   - Extracts row data (excluding checkbox cell)
   - Logs selected data to console
   - Updates the paragraph below the table with selected rows summary

**Implementation details:**
- Uses `getElementsByTagName('td')` to get all cells in a row
- Simple toggle mechanism without complex state management
- Automatically updates display on each checkbox click

---

## â–¶ï¸ CÃ³mo Ejecutar el Proyecto

### 1. Clonar el repositorio

```bash
git clone
cd csv-table-viewer-tech-interview/interview-vite
```

### 2. Instalar dependencias

```bash
pnpm install
```

> Alternativamente podÃ©s usar `npm install` o `yarn install`

### 3. Ejecutar en modo desarrollo

```bash
pnpm dev
```

El servidor se iniciarÃ¡ en:

<http://localhost:5173>

### 4. Build para producciÃ³n

```bash
pnpm build
```

Los archivos optimizados se generarÃ¡n en la carpeta `dist/`

---

## ðŸ“ Estructura del Proyecto
```

csv-table-viewer-tech-interview/
â””â”€â”€ interview-vite/
    â”œâ”€â”€ index.html              # Entrada HTML principal
    â”œâ”€â”€ package.json            # Dependencias y scripts
    â”œâ”€â”€ tsconfig.json           # ConfiguraciÃ³n TypeScript
    â”œâ”€â”€ .prettierrc             # Reglas de formato de cÃ³digo
    â”œâ”€â”€ pnpm-lock.yaml          # Lock file de dependencias
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ main.ts             # Punto de entrada de la aplicaciÃ³n
    â”‚   â”œâ”€â”€ style.css           # Estilos globales
    â”‚   â”œâ”€â”€ domain/
    â”‚   â”‚   â””â”€â”€ SortManager.ts  # LÃ³gica de ordenamiento
    â”‚   â”œâ”€â”€ services/
    â”‚   â”‚   â”œâ”€â”€ FileHandler.ts  # ValidaciÃ³n y manejo de archivos
    â”‚   â”‚   â””â”€â”€ ParserService.ts # Parseo de CSV
    â”‚   â”œâ”€â”€ ui/
    â”‚   â”‚   â””â”€â”€ TableRenderer.ts # Renderizado de tabla
    â”‚   â”œâ”€â”€ types/
    â”‚   â”‚   â””â”€â”€ index.ts        # Tipos TypeScript compartidos
    â”‚   â””â”€â”€ utils/              # Utilidades (extensible)
    â””â”€â”€ public/                 # Archivos estÃ¡ticos
```

---

## ðŸ“„ Tipos TypeScript

### `CSVRow`

Representa una fila de datos CSV con columnas tipadas:

```typescript
export interface CSVRow {
  [column: string]: CSVPrimitive;
}
```

### `CSVPrimitive`

Tipos de valores permitidos en las celdas:

```typescript
export type CSVPrimitive = string | number | boolean | null;
```

### `SortState`

Estados de ordenamiento de columnas:

```typescript
export type SortState = 'asc' | 'desc' | 'none';
```

### `ParseResult`

Resultado del parseo de CSV:

```typescript
export interface ParseResult {
  rows: CSVRow[];
  headers: string[];
}
```

---

## ðŸ”„ Flujo de la AplicaciÃ³n

```mermaid
graph LR
    A[Usuario carga CSV] --> B[FileHandler valida]
    B --> C[ParserService parsea]
    C --> D[TableRenderer muestra]
    D --> E[Usuario clickea header]
    E --> F[SortManager ordena]
    F --> D
```

1. **Usuario carga archivo** â†’ `FileHandler` valida tipo y tamaÃ±o
2. **Archivo vÃ¡lido** â†’ `ParserService` parsea con Papa Parse
3. **Datos parseados** â†’ `TableRenderer` renderiza tabla HTML
4. **Usuario clickea header** â†’ `SortManager` ordena datos
5. **Datos ordenados** â†’ `TableRenderer` actualiza vista

---

## ðŸŽ¨ CaracterÃ­sticas de CÃ³digo

### Type Guards

```typescript
private isNumber(value: unknown): value is number {
  return typeof value === 'number' && Number.isFinite(value);
}
```

### Stable Sort

```typescript
// Mantiene orden original en valores iguales
const indexedRows = rows.map((row, originalIndex) => ({
  row,
  originalIndex,
}));
```

### Locale-Aware Comparison

```typescript
stringA.localeCompare(stringB, undefined, {
  numeric: true,      // '10' viene despuÃ©s de '2'
  sensitivity: 'base', // Case-insensitive
});
```
